<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cuventor | coming soon</title>
    <!-- EmailJS SDK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/emailjs-com/3.2.0/email.min.js"></script>
    <style>
        /* Previous styles remain the same until newsletter-form */

        .newsletter-form {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-width: 320px;
            opacity: 0;
            animation: fadeIn 1s ease forwards;
            animation-delay: 1.5s;
            z-index: 1000;
            transition: transform 0.3s ease-in-out;
        }

        .newsletter-form.slide-out {
            transform: translateX(150%);
        }

        .newsletter-form h3 {
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .newsletter-form input[type="email"] {
            width: 100%;
            padding: 8px 12px;
            margin-bottom: 10px;
            border: 1px solid var(--secondary-color);
            border-radius: 4px;
            font-family: 'Montserrat', sans-serif;
        }

        .newsletter-form button {
            width: 100%;
            padding: 8px 12px;
            background: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            transition: opacity 0.3s ease;
        }

        .newsletter-form button:hover {
            opacity: 0.9;
        }

        .newsletter-form button:disabled {
            background: var(--secondary-color);
            cursor: not-allowed;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: var(--secondary-color);
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: var(--primary-color);
        }

        .message {
            margin-top: 10px;
            padding: 8px;
            border-radius: 4px;
            text-align: center;
            font-size: 0.9rem;
            display: none;
        }

        .success-message {
            background-color: #e6f7e6;
            color: #2e7d32;
        }

        .error-message {
            background-color: #ffebee;
            color: #c62828;
        }

        /* Rest of your existing styles */
    </style>
</head>
<body>
    <!-- Previous HTML content remains the same until newsletter form -->

    <form id="newsletter-form" class="newsletter-form">
        <button type="button" class="close-btn" aria-label="Close newsletter">&times;</button>
        <h3>Subscribe for 15% off</h3>
        <input type="email" id="subscriber-email" placeholder="Enter your email" required>
        <button type="submit" id="submit-btn">Subscribe</button>
        <div id="success-message" class="message success-message">Thanks for subscribing! Check your email for the discount code.</div>
        <div id="error-message" class="message error-message">Oops! Something went wrong. Please try again.</div>
    </form>

    <script>
        // Initialize EmailJS with your user ID
        (function() {
            emailjs.init("paJmeJVY3SOibQbfj"); 
        })();

        // Newsletter functionality
        document.addEventListener('DOMContentLoaded', () => {
            const newsletterForm = document.getElementById('newsletter-form');
            const closeBtn = document.querySelector('.close-btn');
            const submitBtn = document.getElementById('submit-btn');
            const successMessage = document.getElementById('success-message');
            const errorMessage = document.getElementById('error-message');
            const emailInput = document.getElementById('subscriber-email');

            // Check if user has already subscribed
            const hasSubscribed = localStorage.getItem('newsletter_subscribed');
            const lastClosed = localStorage.getItem('newsletter_closed');
            const currentTime = new Date().getTime();

            // Show newsletter form based on conditions
            if (hasSubscribed === 'true') {
                newsletterForm.style.display = 'none';
            } else if (lastClosed) {
                // Show again after 24 hours
                if (currentTime - parseInt(lastClosed) > 24 * 60 * 60 * 1000) {
                    newsletterForm.style.display = 'block';
                    localStorage.removeItem('newsletter_closed');
                } else {
                    newsletterForm.style.display = 'none';
                }
            }

            // Close button functionality
            closeBtn.addEventListener('click', () => {
                newsletterForm.classList.add('slide-out');
                localStorage.setItem('newsletter_closed', currentTime.toString());
                setTimeout(() => {
                    newsletterForm.style.display = 'none';
                    newsletterForm.classList.remove('slide-out');
                }, 300);
            });

            // Form submission
            newsletterForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                submitBtn.disabled = true;
                submitBtn.textContent = 'Subscribing...';

                try {
                    const response = await emailjs.send(
                        "service_yizvedh",
                        "template_x4kiw7f",
                        {
                            subscriber_email: emailInput.value,
                            discount_code: "CUVENTOR15" // Your discount code
                        }
                    );

                    if (response.status === 200) {
                        localStorage.setItem('newsletter_subscribed', 'true');
                        successMessage.style.display = 'block';
                        errorMessage.style.display = 'none';
                        emailInput.value = '';
                        
                        // Hide form after success
                        setTimeout(() => {
                            newsletterForm.classList.add('slide-out');
                            setTimeout(() => {
                                newsletterForm.style.display = 'none';
                                newsletterForm.classList.remove('slide-out');
                            }, 300);
                        }, 3000);
                    }
                } catch (error) {
                    console.error('EmailJS error:', error);
                    errorMessage.style.display = 'block';
                    successMessage.style.display = 'none';
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Subscribe';
                }
            });
        });

        // Your existing definitions and video error handling code remains the same
    </script>
</body>
</html>
